<app-toast></app-toast>

<div class="page">
  <div class="page-header">
    <div>
      <h1>{{ isEdit ? 'Edit Project' : 'New Project' }}</h1>
      <p class="subtitle">{{ isEdit ? 'Update project details' : 'Add a new project to your portfolio' }}</p>
    </div>
    <a routerLink="/admin/projects" class="btn btn-secondary"><i class="fa-solid fa-arrow-left"></i> Back</a>
  </div>

  <div class="form-card">
    <form (ngSubmit)="onSubmit()">
      <div class="form-grid">
        <div class="form-group">
          <label>Language</label>
          <select [(ngModel)]="form.languageId" name="languageId" required>
            <option [ngValue]="null" disabled>Select language</option>
            @for (lang of languages; track lang.id) {
              <option [ngValue]="lang.id">{{ lang.name }} ({{ lang.code }})</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label>Title</label>
          <input type="text" [(ngModel)]="form.title" name="title" required placeholder="Project title" />
        </div>

        <div class="form-group full-width">
          <label>Description</label>
          <textarea [(ngModel)]="form.description" name="description" required placeholder="Project description" rows="4"></textarea>
        </div>

        <div class="form-group">
          <label>Image URL</label>
          <input type="text" [(ngModel)]="form.imageUrl" name="imageUrl" placeholder="/images/project-images/..." />
        </div>

        <div class="form-group">
          <label>Demo Link</label>
          <input type="text" [(ngModel)]="form.demoLink" name="demoLink" placeholder="https://..." />
        </div>

        <div class="form-group">
          <label>Code Link</label>
          <input type="text" [(ngModel)]="form.codeLink" name="codeLink" placeholder="https://github.com/..." />
        </div>

        <div class="form-group">
          <label>Order Index</label>
          <input type="number" [(ngModel)]="form.orderIndex" name="orderIndex" />
        </div>

        <div class="form-group full-width">
          <label>Technologies (comma-separated)</label>
          <input type="text" [(ngModel)]="technologiesString" name="technologies" placeholder="Angular, TypeScript, SASS" />
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="featured" [(ngModel)]="form.featured" name="featured" />
          <label for="featured">Featured</label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="showDemo" [(ngModel)]="form.showDemo" name="showDemo" />
          <label for="showDemo">Show Demo</label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="showCode" [(ngModel)]="form.showCode" name="showCode" />
          <label for="showCode">Show Code</label>
        </div>
      </div>

      <div class="form-actions">
        <a routerLink="/admin/projects" class="btn btn-secondary">Cancel</a>
        <button type="submit" class="btn btn-primary" [disabled]="saving">
          {{ saving ? 'Saving...' : (isEdit ? 'Update' : 'Create') }}
        </button>
      </div>
    </form>
  </div>
</div>
