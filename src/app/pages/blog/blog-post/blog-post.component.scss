:host {
  display: block;
  background-color: #0f0f0f;
  color: #ffffff;
  font-family: 'Montserrat', sans-serif;
}

// ═══════════════════════════════════════════
// Contenteditable placeholder (global)
// ═══════════════════════════════════════════

[data-placeholder].is-empty::before {
  content: attr(data-placeholder);
  color: #333;
  pointer-events: none;
}

[contenteditable] {
  outline: none;
}

.blog-post-container {
  min-height: 100vh;
  max-width: 800px;
  margin: 0 auto;
  padding: 6rem 2rem 4rem;
}

// ═══════════════════════════════════════════
// ADMIN: Toolbar
// ═══════════════════════════════════════════

.admin-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 16px;
  background: #1a1a1a;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.toolbar-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  flex-wrap: wrap;
  min-width: 0;
}

.toolbar-back {
  color: #888;
  text-decoration: none;
  font-size: 1rem;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.15s;

  &:hover {
    color: #fff;
    background: rgba(255, 255, 255, 0.06);
  }
}

.toolbar-slug,
.toolbar-cover {
  display: flex;
  align-items: center;
  gap: 6px;

  label {
    font-size: 0.7rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    flex-shrink: 0;
  }

  input {
    padding: 5px 8px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.04);
    color: #fff;
    font-family: 'Fira Code', monospace;
    font-size: 0.78rem;
    outline: none;
    min-width: 120px;
    transition: border-color 0.15s;

    &:focus {
      border-color: rgba(255, 255, 255, 0.3);
    }
  }
}

.toolbar-cover input {
  min-width: 180px;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.toolbar-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  background: none;
  color: #aaa;
  font-family: inherit;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.15s;

  &:hover {
    border-color: rgba(255, 255, 255, 0.3);
    color: #fff;
  }

  &.published {
    color: #10b981;
    border-color: rgba(16, 185, 129, 0.3);
  }

  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
}

.save-btn {
  background: #fff;
  color: #0f0f0f;
  border-color: #fff;
  font-weight: 600;

  &:hover {
    opacity: 0.85;
    color: #0f0f0f;
  }
}

.undo-redo-group {
  display: flex;
  gap: 2px;
}

.toolbar-icon-btn {
  width: 30px;
  height: 30px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 5px;
  background: none;
  color: #888;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.15s;

  &:hover {
    border-color: rgba(255, 255, 255, 0.2);
    color: #fff;
    background: rgba(255, 255, 255, 0.06);
  }

  &:disabled {
    opacity: 0.25;
    cursor: not-allowed;
    &:hover {
      border-color: rgba(255, 255, 255, 0.08);
      color: #888;
      background: none;
    }
  }
}

// ═══════════════════════════════════════════
// ADMIN: Language tabs
// ═══════════════════════════════════════════

.lang-tabs {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  flex-wrap: wrap;
}

.lang-tab {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 6px 14px;
  border: none;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.04);
  color: #888;
  font-family: inherit;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;

  &:hover {
    background: rgba(255, 255, 255, 0.08);
    color: #ccc;
  }

  &.active {
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
  }
}

.lang-dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #333;

  &.active {
    background: #10b981;
  }
}

.visibility-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  font-size: 0.8rem;
  color: #888;
  cursor: pointer;

  input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: #10b981;
  }
}

// ═══════════════════════════════════════════
// ADMIN: Editable title & description (contenteditable)
// ═══════════════════════════════════════════

// Title and description use the same .post-title / .post-description classes
// as the guest view but become contenteditable. No extra styles needed — they
// inherit the preview look. Only add subtle focus indicator.

.post-title[contenteditable] {
  border-bottom: 2px solid transparent;
  transition: border-color 0.2s;
  &:focus { border-bottom-color: rgba(255, 255, 255, 0.1); }
}

.post-description[contenteditable] {
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s;
  &:focus { border-bottom-color: rgba(255, 255, 255, 0.08); }
}

// ═══════════════════════════════════════════
// ADMIN: Block editor
// ═══════════════════════════════════════════

.blocks-editor {
  display: flex;
  flex-direction: column;
}

.edit-block {
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  overflow: hidden;
  transition: border-color 0.15s, box-shadow 0.15s;

  &:hover {
    border-color: rgba(255, 255, 255, 0.15);
  }

  &.cdk-drag-placeholder {
    opacity: 0.3;
  }
}

.cdk-drag-preview {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  border-radius: 8px;
  background: #1a1a1a;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.cdk-drag-animating {
  transition: transform 200ms ease;
}

.edit-block-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 5px 10px;
  background: rgba(255, 255, 255, 0.03);
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  flex-wrap: wrap;
}

.drag-handle {
  color: #333;
  cursor: grab;
  padding: 2px 4px;
  font-size: 0.7rem;

  &:active { cursor: grabbing; }
  &:hover { color: #666; }
}

.block-type-icon {
  color: #555;
  font-size: 0.7rem;
}

.block-type-name {
  color: #555;
  font-size: 0.72rem;
  font-weight: 500;
  margin-right: auto;
}

.inline-ctrls {
  display: flex;
  gap: 2px;
}

.ctrl-btn {
  padding: 2px 7px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 3px;
  background: none;
  color: #666;
  font-size: 0.65rem;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.12s;
  text-transform: capitalize;

  &:hover { background: rgba(255, 255, 255, 0.06); color: #aaa; }
  &.active { background: #fff; color: #0f0f0f; border-color: #fff; }
}

.code-select {
  padding: 2px 6px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.04);
  color: #aaa;
  font-size: 0.7rem;
  font-family: inherit;
  outline: none;

  option { background: #1a1a1a; }
}

.block-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.12s;

  .edit-block:hover & { opacity: 1; }
}

.act-btn {
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 3px;
  background: none;
  color: #555;
  cursor: pointer;
  font-size: 0.65rem;
  transition: all 0.12s;

  &:hover { background: rgba(255, 255, 255, 0.06); color: #ccc; }
  &.danger:hover { color: #ef4444; background: rgba(239, 68, 68, 0.1); }
  &:disabled { opacity: 0.2; cursor: not-allowed; }
}

// ─── Block edit body (contenteditable — reuses preview classes) ───
.edit-block-body {
  min-height: 20px;

  // Override preview margins — blocks are inside a bordered editor card
  .block-heading {
    margin: 0;
    padding: 10px 14px;
    cursor: text;
  }

  .block-paragraph {
    margin: 0;
    padding: 10px 14px;
    cursor: text;
  }

  .block-list-edit {
    padding: 10px 14px;
    white-space: pre-wrap;
    font-size: 1.05rem;
    line-height: 1.8;
    color: #d4d4d4;
    cursor: text;
  }

  .block-quote {
    margin: 8px 10px;
    p { cursor: text; }
  }

  .block-divider {
    margin: 1rem 14px;
  }

  .block-code {
    margin: 0;
    border-radius: 0;
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.04);

    pre code {
      display: block;
      cursor: text;
      white-space: pre-wrap;
      word-break: break-all;
    }
  }

  .block-callout {
    margin: 8px 10px;
    .callout-text { cursor: text; }
  }

  .block-toggle {
    margin: 0;
    border: none;
    border-radius: 0;
  }

  .block-image {
    margin: 0;
  }
}

// Toggle edit summary bar (not a button like in preview)
.toggle-summary-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 1rem 1.2rem;
  background: rgba(255, 255, 255, 0.03);

  .toggle-arrow { color: #666; font-size: 0.9rem; }
}

.toggle-summary-text {
  flex: 1;
  color: #fff;
  font-size: 1rem;
  font-weight: 600;
  cursor: text;
}

.image-edit-form {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px 14px;

  input {
    width: 100%;
    padding: 7px 10px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.04);
    color: #fff;
    font-family: inherit;
    font-size: 0.85rem;
    outline: none;

    &:focus { border-color: rgba(255, 255, 255, 0.2); }
    &::placeholder { color: #444; }
  }
}

.image-edit-preview {
  max-width: 100%;
  max-height: 200px;
  border-radius: 6px;
  object-fit: cover;
}

// ─── Add block controls ───
.add-between {
  display: flex;
  align-items: center;
  padding: 3px 0;
  opacity: 0;
  transition: opacity 0.15s;
  cursor: pointer;

  &:hover { opacity: 1; }
}

.add-line {
  flex: 1;
  height: 1px;
  background: rgba(255, 255, 255, 0.15);
}

.add-circle {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  background: none;
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.55rem;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s;

  &:hover {
    background: #fff;
    color: #0f0f0f;
    border-color: #fff;
  }
}

.empty-blocks {
  text-align: center;
  padding: 3rem 1rem;
  color: #444;
  font-size: 0.95rem;
  border: 2px dashed rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  margin-bottom: 12px;
}

.add-block-full {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border: 1px dashed rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  background: none;
  color: #555;
  font-family: inherit;
  font-size: 0.85rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.15s;

  &:hover {
    border-color: #fff;
    color: #fff;
    background: rgba(255, 255, 255, 0.03);
  }
}

// ═══════════════════════════════════════════
// Block picker modal
// ═══════════════════════════════════════════

.picker-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.65);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.1s ease;
}

.picker-modal {
  background: #1a1a1a;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 20px;
  width: 380px;
  max-width: 90vw;
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5);
  animation: slideUp 0.15s ease;
}

.picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;

  h3 { font-size: 1rem; margin: 0; }
}

.picker-close {
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 6px;
  background: none;
  color: #666;
  cursor: pointer;
  font-size: 0.85rem;

  &:hover { background: rgba(255, 255, 255, 0.06); color: #fff; }
}

.picker-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
}

.picker-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 14px 8px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  background: none;
  color: #888;
  font-size: 0.78rem;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.12s;

  i { font-size: 1.1rem; }

  &:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.2);
    color: #fff;
  }
}

// ═══════════════════════════════════════════
// GUEST: Read-only styles (same as before)
// ═══════════════════════════════════════════

.loading-state,
.not-found-state {
  text-align: center;
  padding: 6rem 2rem;
  color: #666;

  h1 { font-size: 2rem; margin-bottom: 1rem; color: #fff; }
  p { font-size: 1.1rem; margin-bottom: 2rem; }
}

.back-link {
  display: inline-block;
  color: #666;
  text-decoration: none;
  font-size: 0.9rem;
  margin-bottom: 2rem;
  transition: color 0.3s;
  &:hover { color: #fff; }
}

.cover-image {
  width: 100%;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 2.5rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  img { width: 100%; height: auto; display: block; max-height: 400px; object-fit: cover; }
}

.post-header {
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.post-date {
  font-size: 0.8rem;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.post-title {
  font-size: clamp(1.8rem, 4vw, 2.8rem);
  font-weight: 700;
  line-height: 1.2;
  margin: 0.8rem 0;
}

.post-description {
  font-size: 1.15rem;
  line-height: 1.6;
  color: #aeaeae;
  margin: 0;
}

.post-content { line-height: 1.7; }

.block-heading {
  margin: 2rem 0 1rem;
  font-weight: 700;
  line-height: 1.3;
  &.h1 { font-size: 2rem; }
  &.h2 { font-size: 1.6rem; }
  &.h3 { font-size: 1.3rem; }
}

.block-paragraph {
  font-size: 1.05rem;
  line-height: 1.8;
  color: #d4d4d4;
  margin: 1rem 0;
  white-space: pre-wrap;
}

.block-list {
  margin: 1rem 0;
  padding-left: 1.5rem;
  li {
    font-size: 1.05rem;
    line-height: 1.8;
    color: #d4d4d4;
    margin-bottom: 0.4rem;
  }
  &.unordered li::marker { color: #666; }
  &.ordered li::marker { color: #666; font-weight: 600; }
}

.block-quote {
  margin: 1.5rem 0;
  padding: 1rem 1.5rem;
  border-left: 3px solid #ffffff;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 0 6px 6px 0;
  p {
    font-size: 1.1rem;
    line-height: 1.7;
    color: #d4d4d4;
    font-style: italic;
    margin: 0;
  }
}

.block-divider {
  border: none;
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.15) 20%, rgba(255, 255, 255, 0.15) 80%, transparent);
  margin: 2rem 0;
}

.block-code {
  margin: 1.5rem 0;
  position: relative;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.08);
  .code-lang-label {
    position: absolute;
    top: 8px;
    right: 12px;
    font-size: 0.7rem;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  pre {
    margin: 0;
    padding: 1.5rem;
    background: #1a1a1a;
    overflow-x: auto;
    code {
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 0.88rem;
      line-height: 1.6;
      color: #d4d4d4;
      white-space: pre;
      tab-size: 2;
    }
  }
}

.block-image {
  margin: 2rem 0;
  text-align: center;
  img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.08);
  }
  figcaption {
    font-size: 0.85rem;
    color: #666;
    margin-top: 0.8rem;
    font-style: italic;
  }
}

.block-callout {
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 1rem 1.2rem;
  margin: 1.5rem 0;
  border-radius: 8px;
  border: 1px solid;

  &[data-type='info'] { border-color: rgba(218, 190, 130, 0.35); background: rgba(218, 190, 130, 0.07); .callout-icon { color: #dabe82; } }
  &[data-type='warning'] { border-color: rgba(230, 126, 34, 0.35); background: rgba(230, 126, 34, 0.07); .callout-icon { color: #e67e22; } }
  &[data-type='success'] { border-color: rgba(160, 195, 110, 0.35); background: rgba(160, 195, 110, 0.07); .callout-icon { color: #a0c36e; } }
  &[data-type='error'] { border-color: rgba(192, 57, 43, 0.4); background: rgba(192, 57, 43, 0.08); .callout-icon { color: #c0392b; } }

  .callout-icon { font-size: 1.1rem; flex-shrink: 0; }
  .callout-text { font-size: 0.95rem; line-height: 1.6; color: #d4d4d4; margin: 0; }
}

.block-toggle {
  margin: 1rem 0;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  overflow: hidden;
  &.expanded .toggle-arrow { transform: rotate(90deg); }
}

.toggle-summary {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 1rem 1.2rem;
  background: rgba(255, 255, 255, 0.03);
  border: none;
  color: #fff;
  font-family: inherit;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  text-align: left;
  transition: background 0.2s;
  &:hover { background: rgba(255, 255, 255, 0.06); }
}

.toggle-arrow {
  font-size: 0.9rem;
  color: #666;
  transition: transform 0.2s ease;
}

.toggle-content {
  padding: 0 1.2rem 1rem;
  animation: fadeIn 0.2s ease;
  p { font-size: 1rem; line-height: 1.7; color: #d4d4d4; margin: 0; white-space: pre-wrap; }
}

.post-footer {
  margin-top: 4rem;
  padding-top: 2rem;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

// ═══════════════════════════════════════════
// Animations
// ═══════════════════════════════════════════

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(8px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

// ═══════════════════════════════════════════
// Responsive
// ═══════════════════════════════════════════

@media (max-width: 768px) {
  .blog-post-container { padding: 4rem 1.2rem 3rem; }
  .admin-toolbar { flex-direction: column; align-items: stretch; }
  .toolbar-left { flex-direction: column; }
  .toolbar-right { justify-content: flex-end; }
  .toolbar-cover input { min-width: 100px; }
  .block-code pre { padding: 1rem; }
}
